# !!! 所有内容均区分大小写 !!!

# 唯一标识，生成工具：https://www.uuidgenerator.net/version7
uuid: cfee549f-e4d7-4574-b104-92d8251ebee4

# 原版物品
material: wooden_sword

# 名字
display_name: "<red>Demo Short Sword"

# 描述（可选）
lore:
  - "<gold>Demo Lore 1"
  - "<gold>Demo Lore 2"

# 皮肤（可选）
# 如有设置，则物品自带预设的皮肤
# 这种情况下，皮肤的所有者为无
skin: demo_1

# 皮肤所有者（可选）
# 可以手动设置初始皮肤的所有者
# 写玩家的 UUID (Mojang)
skin_owner: 018d7949-3756-7c0a-8fce-eaa176a37aee

# 等级
# 如果写 "ADVENTURE_LEVEL"，则根据玩家的冒险等级生成
# 如果写 "EXPERIENCE_LEVEL"，则根据玩家的经验等级生成（原版经验等级）
# 如果写 <正整数>，则始终以这里指定的物品等级生成
level: EXPERIENCE_LEVEL
#level: ADVENTURE_LEVEL
#level: 32

# 稀有度（可选）
# 如果写 "mapping:<唯一标识>"，则根据唯一标识对应的映射生成
# 如果写 "rarity:<稀有度名>"，则始终以这里指定的稀有度生成
# 如果省略，则相当于 "mapping:global"
rarity: mapping:demo_1
#rarity: rarity:ancient

# 元素标识
elements:
  sample: 2 # 抽选 n 个元素作为该物品的元素标识
  filters: [ ] # 实现上支持写条件，但没实际作用
  entries: # 候选的元素标识，以及它们各自的权重
    - value: neutral
      weight: 2
    - value: water
      weight: 1
    - value: fire
      weight: 1
    - value: wind
      weight: 1
      filters: # 这里支持写筛选的条件
        - type: element
          element: water

# 铭刻标识（可选）
kizami:
  sample: 2 # 抽选 n 个铭刻作为该物品的铭刻标识
  filters: [ ] # 实现上支持写条件，但没实际作用
  entries: # 候选的铭刻标识，以及它们各自的权重
    - value: iron
      weight: 2
    - value: gold
      weight: 1
    - value: diamond
      weight: 1
    - value: netherite
      weight: 1
      filters: # 这里支持写筛选的条件
        - type: element
          element: water

# 词条栏
cells:
  - id: a # 该词条栏的 id，在该物品的词条栏中必须唯一
    core: group_a # 该词条栏所使用的词条组 id，从 cell_groups 中选择
    curse: group_a # 该词条栏所使用的条件组 id，从 curse_groups 中选择
    keep_empty: false # 该词条栏在生成时如果没有词条被选中的话，是否在物品上保留空的词条栏
    can_reforge: true # 该词条栏是否可重铸
    can_override: false # 该词条栏是否可以被玩家自由修改和覆盖
  - id: b
    core: group_b
    curse: group_b
    keep_empty: false
    can_reforge: true
    can_override: false
  - id: c
    core: group_c
    curse: group_c
    keep_empty: false
    can_reforge: true
    can_override: false
  - id: d
    # core: group_d # 词条组可以省略不写，表示这就是个空栏
    # curse: group_c # 条件组可以省略不写，表示没有解锁条件
    keep_empty: false
    can_reforge: false
    can_override: false
  - id: e
    core: group_e
    # curse: group_e
    keep_empty: false
    can_reforge: false
    can_override: false
  - id: f
    core: group_f
    # curse: group_f
    keep_empty: false
    can_reforge: false
    can_override: false

# 词条组
# 词条组将按照配置文件里的顺序，逐个生成内容，放入词条栏
cell_groups:

  # 词条组：group_a
  group_a: # 该词条组的 id
    filters:
      - type: rarity
        rarity: common
    selectors:
      pool_1: # 该词条组的一个候选池，取值必须在本堆中不重复
        filters: # 进入该池需要满足的条件，如果有多个条件 c1,c2,cn 意思是 AND(c1,c2,cn)
          - type: rarity
            rarity: rare
          - type: ~rarity # 如果 type 以 ~ 开头，则反转原本的布尔值
            rarity: epic
        entries: # 该池拥有的所有词条
          - key: attribute:attack_damage
            weight: 1
            operation: add # 属性支持自定义操作模式 add(默认值), multiply_base, multiply_total
            element: neutral
            lower: 15 # 固定数值
            upper: # 随机数值
              base: 20 # 正态分布的平均值
              scale: 0 # 等级加成，数值为 scale * level，可省略，默认为 0
              spread: 0.2 # 正态分布的标准差
              max: 0.3 # 正态分布的最大标准差，可省略，默认为 spread * 2
          - key: attribute:critical_strike_chance
            weight: 1
            operation: add
            value: # 随机数值
              base: 0.75
              spread: 0.1
              max: 0.2
          - key: attribute:critical_strike_power
            weight: 1
            operation: add
            value: 0.52 # 固定数值
            filters: # 单独设置该词条的筛选条件，条件不满足则相当于该词条不存在于该池里
              - type: level # 这是一个关于物品等级要求的条件
                level: "[20,)" # 写整型范围，支持格式 (2,5], (2..5], (2,), [2..), [2..∞), [2,∞)
      pool_2:
        filters:
          - type: rarity
            rarity: common
        entries:
          - key: attribute:attack_damage
            weight: 1
            element: neutral
            operation: add
            lower: 10
            upper: 15
          - key: attribute:critical_strike_chance
            weight: 1
            value: 0.5
          - key: attribute:critical_strike_power
            weight: 1
            value: 0.25
            filters:
              - type: item_level
                level: "[10,)"
    default: # 备用池，固定写成 default，如果 pools 中没有满足条件的 pool，将使用备用池
      - key: attribute:attack_damage
        weight: 1
        element: neutral
        lower: 5 # 固定数值
        upper: 8 # 固定数值
      - key: attribute:critical_strike_chance
        weight: 1
        value: # 随机数值
          base: 0.3
          scale: 0.1

  # 词条组：group_b
  group_b:
    filters: [ ]
    selectors:
      pool_1:
        filters:
          - type: rarity
            rarity: rare
        entries:
          - key: attribute:attack_speed_level
            weight: 1
            value: 4
          - key: attribute:movement_speed_rate
            weight: 1
            value: 0.4
          - key: attribute:defense
            weight: 1
            value: 23
            mark: x1y1z1 # 为该项指定一个印记（string），当该项被选中时，指定的印记将被加入到上下文中
    default:
      - key: attribute:attack_speed_level
        weight: 1
        value: 2
      - key: attribute:movement_speed_rate
        weight: 1
        value: 0.2

  # 词条组：group_c
  group_c:
    filters: [ ]
    selectors:
      pool_1:
        filters:
          - type: rarity
            rarity: rare
        entries:
          - key: attribute:max_health
            weight: 1
            value: 40
          - key: attribute:max_mana
            weight: 1
            value: 10
          - key: attribute:damage_reduction_rate
            weight: 99
            value: 0.25
            filters:
              - type: mark # 该类型条件将检查物品生成的上下文中是否有指定的印记存在
                mark: x1y1z1 # 如果已经存在值为 "x1y1z1" 的印记，则该项会在随机选择开始前被排除掉
    default:
      - key: attribute:max_health
        weight: 1
        value: 20
      - key: attribute:max_mana
        weight: 1
        value: 5

  # 词条组：group_d
  group_d:
    filters: [ ]
    selectors: { }
    default: # 这是一个只有固定内容的词条栏的基本写法
      - key: attribute:lifesteal
        weight: 10
        value: 0.2
      - key: attribute:manasteal
        weight: 10
        value: 0.21

  # 词条组：group_e
  group_e:
    filters: [ ]
    selectors:
      fire:
        filters:
          - type: element
            element: fire
        entries:
          - key: attribute:attack_damage
            weight: 8
            element: fire
            lower: 10
            upper: 16
          - key: attribute:attack_damage_rate
            weight: 8
            element: fire
            value: 0.1
          - key: attribute:attack_effect_chance
            weight: 8
            element: fire
            value: 0.38
      water:
        filters:
          - type: element
            element: water
        entries:
          - key: attribute:attack_damage
            weight: 8
            element: water
            lower: 10
            upper: 17
          - key: attribute:attack_damage_rate
            weight: 8
            element: water
            value: 0.2
          - key: attribute:attack_effect_chance
            weight: 8
            element: water
            value: 0.42
      wind:
        filters:
          - type: element
            element: wind
        entries:
          - key: attribute:attack_damage
            weight: 8
            element: wind
            lower: 10
            upper: 18
          - key: attribute:attack_damage_rate
            weight: 8
            element: wind
            value: 0.3
          - key: attribute:attack_effect_chance
            weight: 8
            element: wind
            value: 0.56
    default: [ ] # 这里没有定义 fallback

  # 词条组：group_f
  group_f:
    filters: [ ]
    selectors:
      ability: # 这个池的 id
        entries:
          - key: ability:blink
            weight: 1
            mana: 12
            cooldown: 10
            distance: 16
          - key: ability:dash
            weight: 1
            mana: 12
            cooldown: 4
            damage: 8 * damage # 技能伤害为 8 倍的玩家所有元素伤害之和
    default: [ ]

# 词条栏的使用条件组
curse_groups:

  # 自定义条件组：group_a
  group_a:
    selectors:
      common:
        filters:
          - type: rarity
            rarity: common
        entries:
          - key: condition:entity_kills
            weight: 1
            index: demo_bosses_1
            count: 2
          - key: condition:entity_kills
            weight: 1
            index: demo_bosses_2
            count: 2
          - key: condition:entity_kills
            weight: 1
            index: demo_bosses_3
            count: 2
    default:
      - key: condition:entity_kills
        weight: 1
        index: demo_creeps_1
        count: 2
      - key: condition:entity_kills
        weight: 1
        index: demo_creeps_2
        count: 2
      - key: condition:entity_kills
        weight: 1
        index: demo_creeps_3
        count: 2

  # 自定义条件组：group_b
  group_b:
    selectors:
      common:
        filters:
          - type: rarity
            rarity: common
        entries:
          - key: condition:highest_damage
            weight: 1
            element: fire
            amount: 20
          - key: condition:highest_damage
            weight: 1
            element: water
            amount: 32
    default:
      - key: condition:highest_damage
        weight: 1
        element: fire
        amount: 10
      - key: condition:highest_damage
        weight: 1
        element: water
        amount: 16