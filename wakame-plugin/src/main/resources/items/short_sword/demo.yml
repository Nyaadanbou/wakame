# 所有值均区分大小写

# 物品的唯一标识，生成工具：https://www.uuidgenerator.net/version4
uuid: cfee549f-e4d7-4574-b104-92d8251ebee4

# 原版物品
material: wooden_sword

# 物品名字
display-name: "<red>Demo"

# 物品描述
lore:
  - "<gold>Demo 1"
  - "<gold>Demo 2"

# 物品皮肤
# 如有设置，则物品自带预设的皮肤
skin: demo_1

# 物品等级
# 如果写 "context"，则根据玩家的冒险等级生成
# 如果写 <正整数>，则始终以这里指定的物品等级生成
level: context

# 物品稀有度
# 如果写 "context"，则根据玩家的冒险等级生成
# 如果写 <稀有度名>，则始终以这里指定的稀有度生成
rarity: context

# 物品元素标识
elements:
  sample: 2 # 抽选 n 个元素作为该物品的元素标识
  entries: # 候选的元素标识，以及它们各自的权重
    - id: meta:element
      value: neutral
      weight: 2
    - id: meta:element
      value: water
      weight: 1
    - id: meta:element
      value: fire
      weight: 1
    - id: meta:element
      value: wind
      weight: 1

slots:
  - id: a # 该词条栏的 id，在该物品的词条栏中必须唯一
    pool: pool-group-a # 该词条栏所使用的词条堆的 id，词条将从堆中的一个池中抽取
  - id: b
    pool: pool-group-b
  - id: c
    pool: pool-group-c
  - id: d
    pool: pool-group-d
  - id: e
    pool: pool-group-e
  - id: f
    pool: pool-group-f

# 可重铸的词条栏
reforgeable-slots:
  - a # 写词条栏的 id
  - b
  - c

# 词条栏的使用条件
slot-conditions:
  a: pool-group-a # key 写词条栏的 id，value 写使用条件的 id
  b: pool-group-b
  c: pool-group-c

# 词条堆
# 词条堆将按照配置文件里的顺序，逐个生成内容，放入词条栏
slot-pools:

  # 词条堆：pool-group-a
  pool-group-a: # 该词条堆的 id
    pool-a-1: # 该词条堆的一个候选池，取值必须在本堆中不重复
      conditions: # 进入该池需要满足的条件，如果有多个条件 c1,c2,cn 意思是 AND(c1,c2,cn)
        - type: rarity
          value: rare
      entries: # 该池拥有的所有词条
        - id: attribute:attack_damage
          elem: neutral
          range: '[15,20]' # 如果最大最小值是固定的，不是正态分布，则可以写成不带无穷的区间形式
          weight: 1
        - id: attribute:critical_strike_chance
          value: 0.75
          weight: 1
        - id: attribute:critical_strike_rate
          value: 0.52
          weight: 1
          conditions: # 单独设置该词条的筛选条件，条件不满足则相当于该词条不存在于该堆里
            - type: item_level # 这是一个关于物品等级要求的条件
              value: "[20,)" # 写整型范围，支持格式 (2,5], (2..5], (2,), [2..), [2..∞), [2,∞)
    pool-a-2:
      conditions:
        - type: rarity
          value: common
      entries:
        - id: attribute:attack_damage
          elem: neutral
          range: '[10,15]'
          weight: 1
        - id: attribute:critical_strike_chance
          value: 0.5
          weight: 1
        - id: attribute:critical_strike_rate
          value: 0.25
          weight: 1
          conditions:
            - type: item_level
              value: "[10,)"
    fallback: # 备用池，固定写成 fallback，如果没有相匹配的稀有度，将使用备用池
      - id: attribute:attack_damage
        elem: neutral
        min: 5 # 这里的 min/max 相当于写成了区间 '[5,8]' - 另一种等效的写法
        max: 8
        scale: 1.2 # 等级加成，这里意思是每一物品等级提供 1.2 的数值加成
        weight: 1
      - id: attribute:critical_strike_chance
        value: 0.3
        scale: 0.1
        weight: 1

  # 词条堆：pool-group-b
  pool-group-b:
    pool-b-1:
      conditions:
        - type: rarity
          value: rare
      entries:
        - id: attribute:attack_speed_level
          value: 4
          weight: 1
        - id: attribute:movement_speed_rate
          value: 0.4
          weight: 1
        - id: attribute:defense
          meta: x1 # 为该词条指定一个 meta，目前只有生成时会用到这个（可选）
          value: 23
          weight: 1
    fallback:
      - id: attribute:attack_speed_level
        value: 2
        weight: 1
      - id: attribute:movement_speed_rate
        value: 0.2
        weight: 1

  # 词条堆：pool-group-c
  pool-group-c:
    pool-c-1:
      conditions:
        - type: rarity
          value: rare
      entries:
        - id: attribute:max_health
          value: 40
          weight: 1
        - id: attribute:max_mana
          value: 10
          weight: 1
        - id: attribute:damage_reduction_rate
          value: 0.25
          weight: 99
          conditions:
            - type: slot_meta # 该类型条件将检查词条在生成时的 meta
              value: x1 # 如果 meta 为 x1 的词条已经生成，则该词条会被筛掉
    fallback:
      - id: attribute:max_health
        value: 20
        weight: 1
      - id: attribute:max_mana
        value: 5
        weight: 1

  # 词条堆：pool-group-d
  pool-group-d:
    fallback: # 这是一个只有固定内容的词条栏的基本写法
      - id: attribute:lifesteal
        value: 0.2
        weight: 10

  # 词条堆：pool-group-e
  pool-group-e:
    # 注意，这里没有定义 fallback 池
    # 因此如果一个条件都不满足，那么使用该堆的词条栏将为空
    fire:
      conditions:
        - type: element
          value: fire
      entries:
        - id: attribute:attack_damage
          elem: fire
          range: '[10,16]'
          weight: 8
        - id: attribute:attack_damage_rate
          elem: fire
          value: 0.1
          weight: 8
        - id: attribute:attack_effect_chance
          elem: fire
          value: 0.38
          weight: 8
    water:
      conditions:
        - type: element
          value: water
      entries:
        - id: attribute:attack_damage
          elem: water
          range: '[10,17]'
          weight: 8
        - id: attribute:attack_damage_rate
          elem: water
          value: 0.2
          weight: 8
        - id: attribute:attack_effect_chance
          elem: water
          value: 0.42
          weight: 8
    wind:
      conditions:
        - type: element
          value: wind
      entries:
        - id: attribute:attack_damage
          elem: wind
          range: '[10,18]'
          weight: 8
        - id: attribute:attack_damage_rate
          elem: wind
          value: 0.3
          weight: 8
        - id: attribute:attack_effect_chance
          elem: wind
          value: 0.56
          weight: 8

  # 词条堆：pool-group-f
  pool-group-f:
    ability: # 这个池的 id
      entries:
        - id: ability:blink
          mana: 12
          cooldown: 10
          distance: 16
          weight: 1
        - id: ability:dash
          mana: 12
          cooldown: 4
          damage: 8 * damage # 技能伤害为 8 倍的玩家所有元素伤害之和
          weight: 1

# 词条的使用条件
condition-pools:

  # 自定义条件堆：condition-pool-a
  pool-group-a:
    common:
      conditions:
        - type: rarity
          value: common
      entries:
        # TODO 条件的数值要不要也支持正态分布？如果要的话，那条件的数据就必须存在 NBT 里
        - id: count_boss_kill
          name: example_boss
          count: 1
          weight: 1
        - id: count_creep_kill
          name: example_creep
          count: 3
          weight: 1
    fallback:
      - id: count_boss_kill
        name: example_boss
        count: 2
        weight: 1
      - id: count_creep_kill
        name: example_creep
        count: 6
        weight: 1

  # 自定义条件堆：condition-pool-b
  pool-group-b:
    common:
      conditions:
        - type: rarity
          value: common
      entries:
        - id: total_damage
          source: fire
          amount: 100
          weight: 1
    fallback:
      - id: total_damage
        source: neutral
        amount: 100
        weight: 1

  # 自定义条件堆：condition-pool-c
  pool-group-c:
    common:
      conditions:
        - type: rarity
          value: common
      entries:
        - id: total_reforge_cost
          cost: 2000
          weight: 1
    fallback:
      - id: total_reforge_cost
        cost: 4000
        weight: 1
